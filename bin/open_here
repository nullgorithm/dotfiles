#!/bin/bash
#
# Open a program in the current working directory of the focused window.
#

set -o errexit -o nounset -o pipefail

(( $# == 1 ))

xid=$(xprop -root | awk '/^_NET_ACTIVE_WINDOW/ { print $NF; }') || false
pid=$(xprop -id $xid | awk '/^_NET_WM_PID/ { print $NF }') || false
cd $(readlink /proc/$pid/cwd)
$1
